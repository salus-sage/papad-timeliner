const ignoreFrontMatter = require('../utils/ignore-front-matter');
const addLayoutToFile = require('./add-layout-to-file');

function compileTemplate({
  engine,
  file,
  fileName,
  layouts,
  defaultLayout,
  staticLayout,
  context,
}) {
  if (file.static) {
    const fileString = addLayoutToFile(
      file,
      { [staticLayout]: layouts[staticLayout] },
      staticLayout
    );
    return {
      engine,
      fileName,
      fileString,
      context,
    };
  }

  const fileString = addLayoutToFile(
    file,
    layouts,
    defaultLayout,
    staticLayout
  );

  return {
    engine,
    fileName,
    fileString,
    context,
  };
}

module.exports = compileTemplate;
