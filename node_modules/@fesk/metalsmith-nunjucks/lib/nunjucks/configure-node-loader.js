const NodeLoader = require('./node-loader');

function configureNodeLoader(userConfig, source) {
  const paths = [
    ...userConfig.paths,
    userConfig.removeSourceFromPath ? null : source,
  ].filter(Boolean);
  return new NodeLoader(paths, userConfig.nodeLoader);
}

module.exports = configureNodeLoader;
