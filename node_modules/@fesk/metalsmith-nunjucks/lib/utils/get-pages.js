const multimatch = require('multimatch');

function getPages(files, pattern, blacklistPattern = []) {
  // Grab blacklisted items from pattern
  const blacklist = multimatch(Object.keys(files), blacklistPattern) || [];
  // create new filtered map of files to render templates from.
  return (multimatch(Object.keys(files), pattern) || []).reduce((acc, file) => {
    if (blacklist.indexOf(file) === -1) {
      acc[file] = files[file];
    }
    return acc;
  }, {});
}

module.exports = getPages;
