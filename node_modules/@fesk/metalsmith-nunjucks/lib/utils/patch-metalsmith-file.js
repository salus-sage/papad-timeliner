const fs = require('fs');

function patchMetalsmithFile(nodeLoader, filePath) {
  const nodeLoaded = nodeLoader.getSource(filePath);

  if (!nodeLoaded) {
    throw new Error(`File: ${filePath} not found`);
  }

  const fileStats = fs.statSync(nodeLoaded.path);
  return {
    fileName: filePath,
    file: {
      stats: fileStats,
      contents: Buffer.from(nodeLoaded.src),
    },
  };
}

module.exports = patchMetalsmithFile;
