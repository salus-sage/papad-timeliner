const fs = require('fs');
const path = require('path');
const cache = {};

function cachedPackageJson(folder) {
  if (fs.statSync(folder).isDirectory() === false) {
    return null;
  }
  const cwd = folder || process.cwd();
  if (cache[cwd]) {
    return cache[cwd];
  }

  return (cache[cwd] = require(path.join(cwd, 'package.json')));
}

module.exports = cachedPackageJson;
