const child_process = require('child_process');

function runNpmInstall(packageName, configuration) {
  const config = Object.assign(
    {
      dev: false,
      packagePath: process.cwd(),
    },
    configuration
  );

  return new Promise(function(done, err) {
    child_process.exec(
      `npm install ${packageName} ${config.dev ? '--save-dev' : '--save'}`,
      { cwd: config.packagePath },
      function(error) {
        if (error) {
          return err(error);
        }
        done();
      }
    );
  });
}

module.exports = runNpmInstall;
