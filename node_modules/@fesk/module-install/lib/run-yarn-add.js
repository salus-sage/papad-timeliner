const child_process = require('child_process');

function runYarnAdd(packageName, configuration) {
  const config = Object.assign(
    {
      dev: false,
      cwd: process.cwd(),
    },
    configuration
  );

  return new Promise(function(done, err) {
    child_process.exec(
      `yarn add ${packageName}${config.dev ? ' --dev' : ''}`,
      { cwd: config.cwd },
      function(error) {
        if (error) {
          return err(error);
        }
        done();
      }
    );
  });
}

module.exports = runYarnAdd;
