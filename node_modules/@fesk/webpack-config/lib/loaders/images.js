module.exports = {
  test: /\.(jpe?g|png|gif|svg)$/i,
  use: [
    {
      loader: require.resolve('url-loader'),
      options: {
        limit: 10000,
        fallback: require.resolve('file-loader'),
      },
    },
    {
      loader: require.resolve('img-loader'),
      options: {
        plugins(context) {
          if (process.env.NODE_ENV === 'production') return [];
          return [
            require('imagemin-gifsicle')({}),
            require('imagemin-mozjpeg')({}),
            require('imagemin-optipng')({}),
            require('imagemin-svgo')({}),
          ];
        },
      },
    },
  ],
};
