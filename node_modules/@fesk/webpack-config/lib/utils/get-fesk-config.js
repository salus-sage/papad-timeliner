const path = require('path');
const fs = require('fs');

function getFeskConfig() {
  try {
    const pkgExists = fs.existsSync(path.join(process.cwd(), 'package.json'));

    if (pkgExists) {
      const pkg = require(require.resolve(
        path.join(process.cwd(), 'package.json')
      ));
      const baseConfig = pkg && pkg.fesk ? pkg.fesk : {};
      const webpackConfig =
        pkg && pkg.fesk && pkg.fesk.webpack ? pkg.fesk.webpack : {};
      return {
        ...baseConfig,
        ...webpackConfig,
      };
    }
  } catch (err) {
    console.log(err);
  }
  return {};
}

module.exports = { getFeskConfig };
